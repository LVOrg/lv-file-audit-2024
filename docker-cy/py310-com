
#FROM docker.lacviet.vn/xdoc/py311-libreoffice:1 as office
FROM docker.lacviet.vn/xdoc/py310-libreoffice:amd.1 as office
#FROM docker.lacviet.vn/xdoc/ as dotnet
FROM docker.lacviet.vn/xdoc/py310-tessract:amd.1 as tessract
FROM docker.lacviet.vn/xdoc/py310-javac:amd.1 as javac
#FROM docker.lacviet.vn/xdoc/py310-opencv:amd.2 as opencv
FROM docker.lacviet.vn/xdoc/py310-cy_gs_cv2:amd.1 as cv2
FROM docker.lacviet.vn/xdoc/py310-cy-vn:amd.3 as vn
FROM docker.io/python:3.10.12-slim-bookworm
COPY --from=office / /
#COPY --from=dotnet / /
COPY --from=tessract / /
COPY --from=javac / /
COPY --from=cv2 / /
COPY --from=vn /app /app
RUN mv -f /var/lib/dpkg/statoverride /var/lib/dpkg/statoverride-backup
RUN apt-get update -y && apt-get install -y psmisc nocache
#RUN apt update && apt install python3-opencv && #    pip uninstall opencv-contrib-python -y && #    pip uninstall opencv-python -y && #    pip uninstall opencv-python-headless -y && #    pip install opencv-python
#RUN apt autoremove ghostscript -y
#RUN  apt install ocrmypdf -y

COPY ./../docker-cy/check /check
RUN chmod u+x /check/*.sh
RUN /check/opencv.sh
RUN python3 -m pip install underthesea
RUN /check/py_vncorenlp.sh
RUN /check/libreoffice.sh
RUN /check/tessract.sh
RUN /check/tika.sh
RUN /check/dotnet.sh


